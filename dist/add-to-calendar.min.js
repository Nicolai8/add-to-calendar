!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).addToCalendar=t()}}(function(){return function(){return function t(e,n,r){function o(i,u){if(!n[i]){if(!e[i]){var l="function"==typeof require&&require;if(!u&&l)return l(i,!0);if(a)return a(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[i]={exports:{}};e[i][0].call(f.exports,function(t){return o(e[i][1][t]||t)},f,f.exports,t,e,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}}()({1:[function(t,e,n){e.exports=function(){return navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.userLanguage?navigator.userLanguage:navigator.language}},{}],2:[function(t,e,n){(function(t){(function(){var r,o;r=this,o=function(){"use strict";function n(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){i(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof t&&t.global===t?t:void 0,i=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype?function(t,e,i){var u=a.URL||a.webkitURL,l=document.createElement("a");e=e||t.name||"download",l.download=e,l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?o(l):r(l.href)?n(t,e,i):o(l,l.target="_blank")):(l.href=u.createObjectURL(t),setTimeout(function(){u.revokeObjectURL(l.href)},4e4),setTimeout(function(){o(l)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,a){if(e=e||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,a),e);else if(r(t))n(t,e,a);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout(function(){o(i)})}}:function(t,e,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof t)return n(t,e,r);var i="application/octet-stream"===t.type,u=/constructor/i.test(a.HTMLElement)||a.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||i&&u)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=t:location=t,o=null},c.readAsDataURL(t)}else{var f=a.URL||a.webkitURL,s=f.createObjectURL(t);o?o.location=s:location.href=s,o=null,setTimeout(function(){f.revokeObjectURL(s)},4e4)}});a.saveAs=i.saveAs=i,void 0!==e&&(e.exports=i)},void 0!==n?o():(o(),r.FileSaver={})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,n){
/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
var r=9007199254740991,o="[object Arguments]",a="[object Function]",i="[object GeneratorFunction]",u=/^(?:0|[1-9]\d*)$/;var l,c,f=Object.prototype,s=f.hasOwnProperty,d=f.toString,v=f.propertyIsEnumerable,p=(l=Object.keys,c=Object,function(t){return l(c(t))}),g=Math.max,y=!v.call({valueOf:1},"valueOf");function b(t,e){var n=j(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&O(t)}(t)&&s.call(t,"callee")&&(!v.call(t,"callee")||d.call(t)==o)}(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],r=n.length,a=!!r;for(var i in t)!e&&!s.call(t,i)||a&&("length"==i||h(i,r))||n.push(i);return n}function m(t,e,n){var r=t[e];s.call(t,e)&&E(r,n)&&(n!==undefined||e in t)||(t[e]=n)}function h(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||u.test(t))&&t>-1&&t%1==0&&t<e}function w(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||f)}function E(t,e){return t===e||t!=t&&e!=e}var j=Array.isArray;function O(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}(t.length)&&!function(t){var e=T(t)?d.call(t):"";return e==a||e==i}(t)}function T(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var _=function(t){return e=function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:undefined,i=o>2?n[2]:undefined;for(a=t.length>3&&"function"==typeof a?(o--,a):undefined,i&&function(t,e,n){if(!T(n))return!1;var r=typeof e;return!!("number"==r?O(n)&&h(e,n.length):"string"==r&&e in n)&&E(n[e],t)}(n[0],n[1],i)&&(a=o<3?undefined:a,o=1),e=Object(e);++r<o;){var u=n[r];u&&t(e,u,r,a)}return e},n=g(n===undefined?e.length-1:n,0),function(){for(var t=arguments,r=-1,o=g(t.length-n,0),a=Array(o);++r<o;)a[r]=t[n+r];r=-1;for(var i=Array(n+1);++r<n;)i[r]=t[r];return i[n]=a,function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(e,this,i)};var e,n}(function(t,e){if(y||w(e)||O(e))!function(t,e,n,r){n||(n={});for(var o=-1,a=e.length;++o<a;){var i=e[o],u=r?r(n[i],t[i],i,n,t):undefined;m(n,i,u===undefined?t[i]:u)}}(e,function(t){return O(t)?b(t):function(t){if(!w(t))return p(t);var e=[];for(var n in Object(t))s.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}(e),t);else for(var n in e)s.call(e,n)&&m(t,n,e[n])});e.exports=_},{}],4:[function(t,e,n){
/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
var r=9007199254740991,o="[object Arguments]",a="[object Function]",i="[object GeneratorFunction]",u=/^(?:0|[1-9]\d*)$/;var l,c,f=Object.prototype,s=f.hasOwnProperty,d=f.toString,v=f.propertyIsEnumerable,p=(l=Object.keys,c=Object,function(t){return l(c(t))});function g(t,e){var n=m(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&h(t)}(t)&&s.call(t,"callee")&&(!v.call(t,"callee")||d.call(t)==o)}(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],r=n.length,a=!!r;for(var i in t)!e&&!s.call(t,i)||a&&("length"==i||b(i,r))||n.push(i);return n}function y(t){if(n=(e=t)&&e.constructor,r="function"==typeof n&&n.prototype||f,e!==r)return p(t);var e,n,r,o=[];for(var a in Object(t))s.call(t,a)&&"constructor"!=a&&o.push(a);return o}function b(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||u.test(t))&&t>-1&&t%1==0&&t<e}var m=Array.isArray;function h(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}(t.length)&&!function(t){var e=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)?d.call(t):"";return e==a||e==i}(t)}e.exports=function(t){return h(t)?g(t):y(t)}},{}],5:[function(t,e,n){window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,e){e=e||window;for(var n=0;n<this.length;n++)t.call(e,this[n],n,this)})},{}],6:[function(t,e,n){String.prototype.startsWith||function(){"use strict";var t=function(){try{var t={},e=Object.defineProperty,n=e(t,t,t)&&e}catch(r){}return n}(),e={}.toString,n=function(t){if(null==this)throw TypeError();var n=String(this);if(t&&"[object RegExp]"==e.call(t))throw TypeError();var r=n.length,o=String(t),a=o.length,i=arguments.length>1?arguments[1]:undefined,u=i?Number(i):0;u!=u&&(u=0);var l=Math.min(Math.max(u,0),r);if(a+l>r)return!1;for(var c=-1;++c<a;)if(n.charCodeAt(l+c)!=o.charCodeAt(c))return!1;return!0};t?t(String.prototype,"startsWith",{value:n,configurable:!0,writable:!0}):String.prototype.startsWith=n}()},{}],7:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.autoLoad=n.createCalendar=void 0;var o=E(t("browser-locale"));t("nodelist-foreach-polyfill");var a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{"default":t};var e=w();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var i=o?Object.getOwnPropertyDescriptor(t,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=t[a]}n["default"]=t,e&&e.set(t,n);return n}(t("file-saver")),i=E(t("lodash.assign")),u=E(t("lodash.keys"));t("string.prototype.startswith");var l,c=E(t("./generators/ics")),f=E(t("./generators/google")),s=E(t("./generators/yahoo")),d=t("./generators/utils"),v=E(t("./translations/en")),p=E(t("./translations/cn")),g=E(t("./translations/de")),y=E(t("./translations/es")),b=E(t("./translations/fr")),m=E(t("./translations/jp")),h=E(t("./translations/ru"));function w(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return w=function(){return t},t}function E(t){return t&&t.__esModule?t:{"default":t}}function j(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var O={cn:(0,i["default"])({},v["default"],p["default"]),de:(0,i["default"])({},v["default"],g["default"]),en:v["default"],es:(0,i["default"])({},v["default"],y["default"]),fr:(0,i["default"])({},v["default"],b["default"]),jp:(0,i["default"])({},v["default"],m["default"]),ru:(0,i["default"])({},v["default"],h["default"])},T={iCalendar:"iCalendar",googleCalendar:"googleCalendar",outlook:"outlook",yahoo:"yahoo"},_=(j(l={},T.iCalendar,c["default"]),j(l,T.googleCalendar,f["default"]),j(l,T.outlook,c["default"]),j(l,T.yahoo,s["default"]),l),A=function(t,e,n){var r=function(t,e){var n={language:"auto",calendars:(0,u["default"])(T)},r=!1;"atcOverrides"in window&&(n=(0,i["default"])({},n,window.atcOverrides)),Array.prototype.filter.call(t.attributes,function(t){return t.name.startsWith("data-atc-")}).forEach(function(t){var e=t.name.replace("data-atc-","");"translations"===e?r=JSON.parse(t.value):n[e]=t.value}),e&&(n=(0,i["default"])({},n,e));var a=(0,o["default"])().substr(0,2);"auto"===n.language&&(n.language=a),n.language=O[n.language]?n.language:"en";var l=(0,i["default"])({},O[n.language],n.translations||{});return r&&(l=(0,i["default"])({},l,r)),n.translations=l,n}(t,e),a=document.createElement("ul");a.className="atcb-list";var l="";r.calendars.forEach(function(e){n=n||function(t){var e=t.querySelectorAll("var.atc_event");return Array.prototype.map.call(e,function(t){var e=t.querySelectorAll("var"),n={};return e.forEach(function(t){var e=t.className.replace("atc_","");n[e]=t.innerHTML}),n})}(t);var o=function(t,e,n,r){var o=""===n.id?"":'id="'.concat(n.id,"_").concat(r,'_link"'),a=t.translations[r];if((0,d.isIE)()>=11&&(r===T.outlook||r===T.iCalendar))return"<a ".concat(o,' class="atcb-item-link ').concat(r,"\" data-event='").concat(JSON.stringify(e),"'>").concat(a,"</a>");var i=_[r];if(!i)return console.warn("Generator for '".concat(r,"' not found, will be used ics instead")),"";var u=i(e);return"<a ".concat(o,' class="atcb-item-link ').concat(r,'" href="').concat(u,'" target="_blank" rel="nofollow">').concat(a,"</a>")}(r,n,t,e);l+='<li class="atcb-item">'.concat(o,"</li>")}),a.innerHTML=l;var c=document.createElement("a");c.className="atcb-link",c.innerHTML=r.translations.buttonText,c.id=""===t.id?"":"".concat(t.id,"_link"),c.tabIndex=1,t.appendChild(c),t.appendChild(a)};n.createCalendar=A;var M=function(t){t.addEventListener("click",function(e){e.preventDefault();var n=JSON.parse(t.getAttribute("data-event"));!function(t){var e=new Blob([t]);a.saveAs(e,"event.ics")}((0,c["default"])(n))})},S=function(){var t=document.getElementsByClassName("addtocalendar");Array.prototype.forEach.call(t,function(t){A(t)}),document.querySelectorAll(".atcb-item-link[data-event]").forEach(M)};n.autoLoad=S,S()},{"./generators/google":8,"./generators/ics":9,"./generators/utils":10,"./generators/yahoo":11,"./translations/cn":12,"./translations/de":13,"./translations/en":14,"./translations/es":15,"./translations/fr":16,"./translations/jp":17,"./translations/ru":18,"browser-locale":1,"file-saver":2,"lodash.assign":3,"lodash.keys":4,"nodelist-foreach-polyfill":5,"string.prototype.startswith":6}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var r=t("./utils"),o=function(t){t=(0,r.convertEventParamsFromATC)(t[0]);var e=(0,r.formatTime)(t.start),n=(0,r.calculateEndTime)(t);return encodeURI(["https://www.google.com/calendar/render","?action=TEMPLATE","&text=".concat(t.title||""),"&dates=".concat(e||"","/").concat(n||""),"&details=".concat(t.description||""),"&location=".concat(t.address||""),"&sprop=&sprop=name:"].join(""))};n["default"]=o},{"./utils":10}],9:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var r=t("./utils"),o=function(t){t=(0,r.convertEventParamsFromATC)(t[0]);var e=(0,r.formatTime)(t.start),n=(0,r.calculateEndTime)(t),o=["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT","URL:"+document.URL,"DTSTART:"+(e||""),"DTEND:"+(n||""),"SUMMARY:"+(t.title||""),"DESCRIPTION:"+(t.description||""),"LOCATION:"+(t.address||""),"END:VEVENT","END:VCALENDAR"].join("\n");return(0,r.isIE)()?o:encodeURI("data:text/calendar;charset=utf8,".concat(o))};n["default"]=o},{"./utils":10}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isIE=n.convertEventParamsFromATC=n.calculateEndTime=n.formatTime=n.MS_IN_MINUTES=void 0;var r,o=(r=t("lodash.assign"))&&r.__esModule?r:{"default":r};n.MS_IN_MINUTES=6e4;var a=function(t){return t.toISOString().replace(/-|:|\.\d+/g,"")};n.formatTime=a;n.calculateEndTime=function(t){return t.end?a(t.end):a(new Date(t.start.getTime()+6e4*t.duration))};var i=function(t){return t&&"string"==typeof t&&(t=new Date(t)),t};n.convertEventParamsFromATC=function(t){var e=i(t.date_start),n=i(t.date_end);return(0,o["default"])({},t,{start:e,end:n})};n.isIE=function(){var t=document.createElement("input");return window.ActiveXObject===undefined?undefined:document.addEventListener?window.atob?t.dataset?11:10:9:8}},{"lodash.assign":3}],11:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var r=t("./utils"),o=function(t){var e=(t=(0,r.convertEventParamsFromATC)(t[0])).end?(t.end.getTime()-t.start.getTime())/r.MS_IN_MINUTES:t.duration,n=(e<600?"0"+Math.floor(e/60):Math.floor(e/60)+"")+(e%60<10?"0"+e%60:e%60+""),o=(0,r.formatTime)(new Date(t.start-t.start.getTimezoneOffset()*r.MS_IN_MINUTES))||"";return encodeURI(["https://calendar.yahoo.com/?v=60&view=d&type=20","&title="+(t.title||""),"&st="+o,"&dur="+(n||""),"&desc="+(t.description||""),"&in_loc="+(t.address||"")].join(""))};n["default"]=o},{"./utils":10}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"添加到日历"}},{}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"In den Kalender"}},{}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"Add to Calendar",iCalendar:"iCalendar",googleCalendar:"Google Calendar",outlook:"Outlook",yahoo:"Yahoo! Calendar"}},{}],15:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"Añadir al Calendario"}},{}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"Ajouter au calendrier"}},{}],17:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"カレンダーに追加"}},{}],18:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"Добавить в календарь"}},{}]},{},[7])(7)});