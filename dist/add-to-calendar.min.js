!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).addToCalendar=e()}}(function(){return function(){return function e(t,n,r){function o(u,i){if(!n[u]){if(!t[u]){var l="function"==typeof require&&require;if(!i&&l)return l(u,!0);if(a)return a(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[u]={exports:{}};t[u][0].call(f.exports,function(e){return o(t[u][1][e]||e)},f,f.exports,e,t,n,r)}return n[u].exports}for(var a="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}}()({1:[function(e,t,n){t.exports=function(){return navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.userLanguage?navigator.userLanguage:navigator.language}},{}],2:[function(e,t,n){(function(e){(function(){var r,o;r=this,o=function(){"use strict";function n(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){u(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof e&&e.global===e?e:void 0,u=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype?function(e,t,u){var i=a.URL||a.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?o(l):r(l.href)?n(e,t,u):o(l,l.target="_blank")):(l.href=i.createObjectURL(e),setTimeout(function(){i.revokeObjectURL(l.href)},4e4),setTimeout(function(){o(l)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,a){if(t=t||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,a),t);else if(r(e))n(e,t,a);else{var u=document.createElement("a");u.href=e,u.target="_blank",setTimeout(function(){o(u)})}}:function(e,t,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return n(e,t,r);var u="application/octet-stream"===e.type,i=/constructor/i.test(a.HTMLElement)||a.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||u&&i)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},c.readAsDataURL(e)}else{var f=a.URL||a.webkitURL,s=f.createObjectURL(e);o?o.location=s:location.href=s,o=null,setTimeout(function(){f.revokeObjectURL(s)},4e4)}});a.saveAs=u.saveAs=u,void 0!==t&&(t.exports=u)},void 0!==n?o():(o(),r.FileSaver={})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){
/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
var r=9007199254740991,o="[object Arguments]",a="[object Function]",u="[object GeneratorFunction]",i=/^(?:0|[1-9]\d*)$/;var l,c,f=Object.prototype,s=f.hasOwnProperty,d=f.toString,v=f.propertyIsEnumerable,p=(l=Object.keys,c=Object,function(e){return l(c(e))}),y=Math.max,g=!v.call({valueOf:1},"valueOf");function b(e,t){var n=O(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&j(e)}(e)&&s.call(e,"callee")&&(!v.call(e,"callee")||d.call(e)==o)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,a=!!r;for(var u in e)!t&&!s.call(e,u)||a&&("length"==u||h(u,r))||n.push(u);return n}function m(e,t,n){var r=e[t];s.call(e,t)&&E(r,n)&&(n!==undefined||t in e)||(e[t]=n)}function h(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||i.test(e))&&e>-1&&e%1==0&&e<t}function w(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||f)}function E(e,t){return e===t||e!=e&&t!=t}var O=Array.isArray;function j(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!function(e){var t=T(e)?d.call(e):"";return t==a||t==u}(e)}function T(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var _=function(e){return t=function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:undefined,u=o>2?n[2]:undefined;for(a=e.length>3&&"function"==typeof a?(o--,a):undefined,u&&function(e,t,n){if(!T(n))return!1;var r=typeof t;return!!("number"==r?j(n)&&h(t,n.length):"string"==r&&t in n)&&E(n[t],e)}(n[0],n[1],u)&&(a=o<3?undefined:a,o=1),t=Object(t);++r<o;){var i=n[r];i&&e(t,i,r,a)}return t},n=y(n===undefined?t.length-1:n,0),function(){for(var e=arguments,r=-1,o=y(e.length-n,0),a=Array(o);++r<o;)a[r]=e[n+r];r=-1;for(var u=Array(n+1);++r<n;)u[r]=e[r];return u[n]=a,function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(t,this,u)};var t,n}(function(e,t){if(g||w(t)||j(t))!function(e,t,n,r){n||(n={});for(var o=-1,a=t.length;++o<a;){var u=t[o],i=r?r(n[u],e[u],u,n,e):undefined;m(n,u,i===undefined?e[u]:i)}}(t,function(e){return j(e)?b(e):function(e){if(!w(e))return p(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}(t),e);else for(var n in t)s.call(t,n)&&m(e,n,t[n])});t.exports=_},{}],4:[function(e,t,n){
/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
var r=9007199254740991,o="[object Arguments]",a="[object Function]",u="[object GeneratorFunction]",i=/^(?:0|[1-9]\d*)$/;var l,c,f=Object.prototype,s=f.hasOwnProperty,d=f.toString,v=f.propertyIsEnumerable,p=(l=Object.keys,c=Object,function(e){return l(c(e))});function y(e,t){var n=m(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&h(e)}(e)&&s.call(e,"callee")&&(!v.call(e,"callee")||d.call(e)==o)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,a=!!r;for(var u in e)!t&&!s.call(e,u)||a&&("length"==u||b(u,r))||n.push(u);return n}function g(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||f,t!==r)return p(e);var t,n,r,o=[];for(var a in Object(e))s.call(e,a)&&"constructor"!=a&&o.push(a);return o}function b(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||i.test(e))&&e>-1&&e%1==0&&e<t}var m=Array.isArray;function h(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?d.call(e):"";return t==a||t==u}(e)}t.exports=function(e){return h(e)?y(e):g(e)}},{}],5:[function(e,t,n){window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)})},{}],6:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.autoLoad=n.createCalendar=void 0;var o=E(e("browser-locale"));e("nodelist-foreach-polyfill");var a,u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{"default":e};var t=w();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n["default"]=e,t&&t.set(e,n);return n}(e("file-saver")),i=E(e("lodash.assign")),l=E(e("lodash.keys")),c=E(e("./generators/ics")),f=E(e("./generators/google")),s=E(e("./generators/yahoo")),d=e("./generators/utils"),v=E(e("./translations/en")),p=E(e("./translations/cn")),y=E(e("./translations/de")),g=E(e("./translations/es")),b=E(e("./translations/fr")),m=E(e("./translations/jp")),h=E(e("./translations/ru"));function w(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return w=function(){return e},e}function E(e){return e&&e.__esModule?e:{"default":e}}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j={cn:(0,i["default"])({},v["default"],p["default"]),de:(0,i["default"])({},v["default"],y["default"]),en:v["default"],es:(0,i["default"])({},v["default"],g["default"]),fr:(0,i["default"])({},v["default"],b["default"]),jp:(0,i["default"])({},v["default"],m["default"]),ru:(0,i["default"])({},v["default"],h["default"])},T={iCalendar:"iCalendar",googleCalendar:"googleCalendar",outlook:"outlook",yahoo:"yahoo"},_=(O(a={},T.iCalendar,c["default"]),O(a,T.googleCalendar,f["default"]),O(a,T.outlook,c["default"]),O(a,T.yahoo,s["default"]),a),A=function(e,t,n){var r=function(e,t){var n={language:"auto",calendars:(0,l["default"])(T)},r=!1;"atcOverrides"in window&&(n=(0,i["default"])({},n,window.atcOverrides)),Array.prototype.filter.call(e.attributes,function(e){return e.name.startsWith("data-atc-")}).forEach(function(e){var t=e.name.replace("data-atc-","");"translations"===t?r=JSON.parse(e.value):n[t]=e.value}),t&&(n=(0,i["default"])({},n,t));var a=(0,o["default"])().substr(0,2);"auto"===n.language&&(n.language=a),n.language=j[n.language]?n.language:"en";var u=(0,i["default"])({},j[n.language],n.translations||{});return r&&(u=(0,i["default"])({},u,r)),n.translations=u,n}(e,t),a=document.createElement("ul");a.className="atcb-list";var u="";r.calendars.forEach(function(t){n=n||function(e){var t=e.querySelectorAll("var.atc_event");return Array.prototype.map.call(t,function(e){var t=e.querySelectorAll("var"),n={};return t.forEach(function(e){var t=e.className.replace("atc_","");n[t]=e.innerHTML}),n})}(e);var o=function(e,t,n,r){var o=""===n.id?"":'id="'.concat(n.id,"_").concat(r,'_link"'),a=e.translations[r];if((0,d.isIE)()>=11&&(r===T.outlook||r===T.iCalendar))return"<a ".concat(o,' class="atcb-item-link ').concat(r,"\" data-event='").concat(JSON.stringify(t),"'>").concat(a,"</a>");var u=_[r];if(!u)return console.warn("Generator for '".concat(r,"' not found, will be used ics instead")),"";var i=u(t);return"<a ".concat(o,' class="atcb-item-link ').concat(r,'" href="').concat(i,'" target="_blank" rel="nofollow">').concat(a,"</a>")}(r,n,e,t);u+='<li class="atcb-item">'.concat(o,"</li>")}),a.innerHTML=u;var c=document.createElement("a");c.className="atcb-link",c.innerHTML=r.translations.buttonText,c.id=""===e.id?"":"".concat(e.id,"_link"),c.tabIndex=1,e.appendChild(c),e.appendChild(a)};n.createCalendar=A;var M=function(e){e.addEventListener("click",function(t){t.preventDefault();var n=JSON.parse(e.getAttribute("data-event"));!function(e){var t=new Blob([e]);u.saveAs(t,"event.ics")}((0,c["default"])(n))})},S=function(){var e=document.getElementsByClassName("addtocalendar");Array.prototype.forEach.call(e,function(e){A(e)}),document.querySelectorAll(".atcb-item-link[data-event]").forEach(M)};n.autoLoad=S,S()},{"./generators/google":7,"./generators/ics":8,"./generators/utils":9,"./generators/yahoo":10,"./translations/cn":11,"./translations/de":12,"./translations/en":13,"./translations/es":14,"./translations/fr":15,"./translations/jp":16,"./translations/ru":17,"browser-locale":1,"file-saver":2,"lodash.assign":3,"lodash.keys":4,"nodelist-foreach-polyfill":5}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var r=e("./utils"),o=function(e){e=(0,r.convertEventParamsFromATC)(e[0]);var t=(0,r.formatTime)(e.start),n=(0,r.calculateEndTime)(e);return encodeURI(["https://www.google.com/calendar/render","?action=TEMPLATE","&text=".concat(e.title||""),"&dates=".concat(t||"","/").concat(n||""),"&details=".concat(e.description||""),"&location=".concat(e.address||""),"&sprop=&sprop=name:"].join(""))};n["default"]=o},{"./utils":9}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var r=e("./utils"),o=function(e){e=(0,r.convertEventParamsFromATC)(e[0]);var t=(0,r.formatTime)(e.start),n=(0,r.calculateEndTime)(e),o=["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT","URL:"+document.URL,"DTSTART:"+(t||""),"DTEND:"+(n||""),"SUMMARY:"+(e.title||""),"DESCRIPTION:"+(e.description||""),"LOCATION:"+(e.address||""),"END:VEVENT","END:VCALENDAR"].join("\n");return(0,r.isIE)()?o:encodeURI("data:text/calendar;charset=utf8,".concat(o))};n["default"]=o},{"./utils":9}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isIE=n.convertEventParamsFromATC=n.calculateEndTime=n.formatTime=n.MS_IN_MINUTES=void 0;var r,o=(r=e("lodash.assign"))&&r.__esModule?r:{"default":r};n.MS_IN_MINUTES=6e4;var a=function(e){return e.toISOString().replace(/-|:|\.\d+/g,"")};n.formatTime=a;n.calculateEndTime=function(e){return e.end?a(e.end):a(new Date(e.start.getTime()+6e4*e.duration))};var u=function(e){return e&&"string"==typeof e&&(e=new Date(e)),e};n.convertEventParamsFromATC=function(e){var t=u(e.date_start),n=u(e.date_end);return(0,o["default"])({},e,{start:t,end:n})};n.isIE=function(){var e=document.createElement("input");return window.ActiveXObject===undefined?undefined:document.addEventListener?window.atob?e.dataset?11:10:9:8}},{"lodash.assign":3}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var r=e("./utils"),o=function(e){var t=(e=(0,r.convertEventParamsFromATC)(e[0])).end?(e.end.getTime()-e.start.getTime())/r.MS_IN_MINUTES:e.duration,n=(t<600?"0"+Math.floor(t/60):Math.floor(t/60)+"")+(t%60<10?"0"+t%60:t%60+""),o=(0,r.formatTime)(new Date(e.start-e.start.getTimezoneOffset()*r.MS_IN_MINUTES))||"";return encodeURI(["https://calendar.yahoo.com/?v=60&view=d&type=20","&title="+(e.title||""),"&st="+o,"&dur="+(n||""),"&desc="+(e.description||""),"&in_loc="+(e.address||"")].join(""))};n["default"]=o},{"./utils":9}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"添加到日历"}},{}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"In den Kalender"}},{}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"Add to Calendar",iCalendar:"iCalendar",googleCalendar:"Google Calendar",outlook:"Outlook",yahoo:"Yahoo! Calendar"}},{}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"Añadir al Calendario"}},{}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"Ajouter au calendrier"}},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"カレンダーに追加"}},{}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"Добавить в календарь"}},{}]},{},[6])(6)});